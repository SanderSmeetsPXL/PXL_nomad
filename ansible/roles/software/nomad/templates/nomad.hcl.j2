datacenter = "dc1"
data_dir = "/opt/nomad"
log_level = "DEBUG"
name = "{{ inventory_hostname }}"
bind_addr = "{{ ansible_eth1.ipv4.address }}"


{% if "servers" in group_names %}
server {
	enabled = true
	bootstrap_expect = 1
}
{% else %}
client {
	enabled = true
	network_interface = "eth1"
}
{% endif %}

plugin "docker" {
    config {
		gc {
			dangling_containers {
				enabled = false
			}
		}
        volumes {
            enabled = true
        }
	}
}

telemetry {
  collection_interval = "1s"
  disable_hostname = true
  prometheus_metrics = true
  publish_allocation_metrics = true
  publish_node_metrics = true
}